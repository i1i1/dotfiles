#!/bin/sh
get_subs() {
    cat <<EOF
Memes	Telegram	adikmudry
Memes	Telegram	am_devs
Memes	Telegram	animalswithoutcock
Memes	Telegram	boovideos
Memes	Telegram	derrunda
Memes	Telegram	groyperism
Memes	Telegram	ithueti
Memes	Telegram	mudrosti
Memes	Telegram	northmem
Memes	Telegram	northmemes
Memes	Telegram	onion_sorrow
Memes	Telegram	passivv
Memes	Telegram	pupyatko
Memes	Telegram	russkiememy
Memes	Telegram	shemomemy
Memes	Telegram	skazochnoebalie
Memes	Telegram	stupidgumor
Memes	Telegram	stupidvideo
Memes	Telegram	stupidvideo
Memes	Telegram	thedemonofcascadia
News	Telegram	doxajournal
News	Telegram	enter_media
News	Telegram	foreign_office
News	Telegram	furydrops
News	Telegram	indekazancity
News	Telegram	libertatar
News	Telegram	lpr_tg
News	Telegram	mediaveter
News	Telegram	practicalfinance
News	Telegram	rightatlant
News	Telegram	spblpr
News	Telegram	theeconomistaccess
News	Telegram	TJournal
News	Telegram	vedomosti
News	Telegram	zlochan
Philosophy	Telegram	cyberpositiw
Philosophy	Telegram	fratbook
Philosophy	Telegram	fratruth
Philosophy	Telegram	hplibrary
Philosophy	Telegram	hyperbor
Philosophy	Telegram	lhcgl
Philosophy	Telegram	moihram
Philosophy	Telegram	parakharatteintonomisma
Philosophy	Telegram	philosophy300
Philosophy	Telegram	philosophycafemoscow
Philosophy	Telegram	philosophyspace
Philosophy	Telegram	radio_echo_terry
Philosophy	Telegram	repcentre
Philosophy	Telegram	russ_girl
Philosophy	Telegram	sc_ch
Philosophy	Telegram	septicscepsis
Philosophy	Telegram	vershki
Politics	Telegram	babykonirazdolyevputi
Politics	Telegram	BarnaulAnalytics
Politics	Telegram	belij_svetoch
Politics	Telegram	big3russia
Politics	Telegram	britishpolitics
Politics	Telegram	carrollired
Politics	Telegram	catechismfreedom
Politics	Telegram	chernaya100
Politics	Telegram	chpartea
Politics	Telegram	civil_service
Politics	Telegram	coffe_club
Politics	Telegram	dostoevskyclub
Politics	Telegram	dplatonova
Politics	Telegram	EasternOrthodoxChannel
Politics	Telegram	fefu_ru_club
Politics	Telegram	goodrussianschannel
Politics	Telegram	identarist
Politics	Telegram	insect_life
Politics	Telegram	iskra_press
Politics	Telegram	istrkalkglk
Politics	Telegram	itsorm
Politics	Telegram	izhitsamag
Politics	Telegram	k_a_krylov
Politics	Telegram	kargokult
Politics	Telegram	kolosoff_n
Politics	Telegram	korkoma
Politics	Telegram	LebedevOne
Politics	Telegram	lecturerhistory
Politics	Telegram	libertarico
Politics	Telegram	lorcencov
Politics	Telegram	malekdudakov
Politics	Telegram	mnogonazi
Politics	Telegram	mrlibertarian
Politics	Telegram	nap_official
Politics	Telegram	oguromica
Politics	Telegram	plumtv
Politics	Telegram	poriv1993
Politics	Telegram	rozanovclub
Politics	Telegram	rusquad
Politics	Telegram	russian_league
Politics	Telegram	syndy4ok
Politics	Telegram	ugolnij
Politics	Telegram	vendeemag
Politics	Telegram	whalesgohigh
Politics	Telegram	wuhappening
Politics	Telegram	zheludkovwrites
Programming	Atom	https://blog.golang.org/feed.atom
Programming	Atom	https://opennet.ru/opennews/opennews_all_utf.rss
Programming	Atom	https://www.phoronix.com/rss.php
Programming	Atom	https://blog.cloudflare.com/rss/
Programming	Telegram	about_your_mom
Programming	Telegram	BCI_suffering
Programming	Telegram	buhtig
Programming	Telegram	catops
Programming	Telegram	CloudPhysics
Programming	Telegram	computerscienceabroad
Programming	Telegram	cyberhermitage
Programming	Telegram	dataisdata
Programming	Telegram	dependencyhell
Programming	Telegram	dereference_pointer_there
Programming	Telegram	devopslibrary
Programming	Telegram	devpassion
Programming	Telegram	documentsjournal
Programming	Telegram	dodopizzadev
Programming	Telegram	experimentalchill
Programming	Telegram	generictalks
Programming	Telegram	girlycode
Programming	Telegram	GNUPropaganda
Programming	Telegram	golang_for_two
Programming	Telegram	goproglib
Programming	Telegram	hn_best_comments
Programming	Telegram	ihatereality
Programming	Telegram	internsasha
Programming	Telegram	itgram_channel
Programming	Telegram	jemalloc
Programming	Telegram	lawveresgulag
Programming	Telegram	lilfunctor
Programming	Telegram	loss_function_porn
Programming	Telegram	moire_every_day
Programming	Telegram	musly
Programming	Telegram	NeuralShit
Programming	Telegram	ntwrkchnnl
Programming	Telegram	oleg_fov
Programming	Telegram	oleg_log
Programming	Telegram	opensource_findings
Programming	Telegram	optozorax_dev
Programming	Telegram	overtimehate
Programming	Telegram	patchcord
Programming	Telegram	peterblog
Programming	Telegram	profunctor_io
Programming	Telegram	programming_sucks
Programming	Telegram	pro_optimise
Programming	Telegram	pyproglib
Programming	Telegram	R0_Crew
Programming	Telegram	r0_jobs
Programming	Telegram	randomapi
Programming	Telegram	randomstuffilike
Programming	Telegram	repushko_channel
Programming	Telegram	rustamann
Programming	Telegram	rxd_txd
Programming	Telegram	securedevops
Programming	Telegram	sfninja
Programming	Telegram	sqaunderhood
Programming	Telegram	SubSpecieAeternitatis
Programming	Telegram	sv9t_channel
Programming	Telegram	SysadminNotes
Programming	Telegram	sysblok
Programming	Telegram	teamerlin
Programming	Telegram	techchsh
Programming	Telegram	theyforcedme
Programming	Telegram	todayishared
Programming	Telegram	TrTrTr8holes
Programming	Telegram	yarosh_log
Programming	Telegram	zhovner_hub
Russian	Telegram	alpha1918
Russian	Telegram	antonkorablev
Russian	Telegram	arhitekturasi
Russian	Telegram	chernaya100kitchen
Russian	Telegram	chuzhbina
Russian	Telegram	diasporiana
Russian	Telegram	ecoyase
Russian	Telegram	gorodaN
Russian	Telegram	grib0chki
Russian	Telegram	konservach
Russian	Telegram	memskkk
Russian	Telegram	neohota
Russian	Telegram	otdel_gazet_RNB
Russian	Telegram	podled
Russian	Telegram	rus_eda
Russian	Telegram	rusemphoto
Russian	Telegram	Russia_and_anvil
Russian	Telegram	russianfolkmu
Russian	Telegram	RussianPictures
Russian	Telegram	ruwawa
Russian	Telegram	tolstoy_diaries
Russian	Telegram	yourfriendfromrussia
Stuff	Telegram	bplog
Stuff	Telegram	goldchihuahua
Stuff	Telegram	honestmarketing
Stuff	Telegram	insidethebrain
Stuff	Telegram	WTF_HR
EOF
}


cfg_Telegram() { cfg_Atom "https://sebsauvage.net/rss-bridge/?action=display&bridge=Telegram&format=Atom&username=$1"; }
cfg_Atom()     { printf "\tfeed { url = \"%s\" }\n" "$1"; }

echo mountpoint = '"'$HOME/mnt/rssfs'"'
echo

pcat=""

get_subs | while read ln; do
    ncat=$(echo $ln | awk '{print $1}')
    type=$(echo $ln | awk '{print $2}')
    arg=$(echo $ln | awk '{print $3}')

    if [ "$pcat" != "$ncat" ]; then
        [ "$pcat" != "" ] && printf '}\n\n'
        echo category '"'$ncat'"' '{'
    fi

    cfg_$type $arg
    pcat=$ncat
done

printf '}\n\n'
